<div class="vacancy-create-container">
  <div class="form-header">
    <h1>
      <mat-icon>work</mat-icon>
      Create New Vacancy
    </h1>
    <p>Enter all required information to post a new job vacancy</p>
  </div>

  <form [formGroup]="vacancyForm" (ngSubmit)="onSubmit()" class="vacancy-form">
    
    <!-- Basic Information Section -->
    <div class="form-section">
      <h2>
        <mat-icon>info</mat-icon>
        Basic Information
      </h2>

      <div class="form-row">
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Job Title</mat-label>
          <input matInput 
                 formControlName="jobTitle" 
                 placeholder="e.g., Senior Frontend Developer">
          <mat-hint>Enter a clear and descriptive job title</mat-hint>
          <mat-error *ngIf="isFieldInvalid('jobTitle')">
            {{getFieldErrorMessage('jobTitle')}}
          </mat-error>
        </mat-form-field>
      </div>

      <div class="form-row">
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Job Description</mat-label>
          <textarea matInput 
                    formControlName="jobDescription"
                    rows="6"
                    placeholder="Describe the role, responsibilities, and requirements..."></textarea>
          <mat-hint>{{vacancyForm.get('jobDescription')?.value?.length || 0}}/1000 characters (minimum 50)</mat-hint>
          <mat-error *ngIf="isFieldInvalid('jobDescription')">
            {{getFieldErrorMessage('jobDescription')}}
          </mat-error>
        </mat-form-field>
      </div>

      <div class="form-row two-columns">
        <mat-form-field appearance="outline">
          <mat-label>Job Level</mat-label>
          <mat-select formControlName="jobLevel">
            <mat-option value="">Select job level</mat-option>
            <mat-option *ngFor="let level of jobLevels" [value]="level">
              {{level}}
            </mat-option>
          </mat-select>
          <mat-error *ngIf="isFieldInvalid('jobLevel')">
            {{getFieldErrorMessage('jobLevel')}}
          </mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Experience Required</mat-label>
          <mat-select formControlName="experience">
            <mat-option value="">Select experience range</mat-option>
            <mat-option *ngFor="let exp of experienceRanges" [value]="exp">
              {{exp}}
            </mat-option>
          </mat-select>
          <mat-error *ngIf="isFieldInvalid('experience')">
            {{getFieldErrorMessage('experience')}}
          </mat-error>
        </mat-form-field>
      </div>

      <div class="form-row two-columns">
        <mat-form-field appearance="outline">
          <mat-label>Open Positions</mat-label>
          <input matInput 
                 type="number"
                 formControlName="openPositions" 
                 placeholder="e.g., 3"
                 min="1"
                 max="50">
          <mat-hint>Number of available positions</mat-hint>
          <mat-error *ngIf="isFieldInvalid('openPositions')">
            {{getFieldErrorMessage('openPositions')}}
          </mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Recruiter</mat-label>
          <mat-select formControlName="recruiter">
            <mat-option value="">Select recruiter</mat-option>
            <mat-option *ngFor="let recruiter of recruiters" [value]="recruiter">
              {{recruiter}}
            </mat-option>
          </mat-select>
          <mat-error *ngIf="isFieldInvalid('recruiter')">
            {{getFieldErrorMessage('recruiter')}}
          </mat-error>
        </mat-form-field>
      </div>
    </div>

    <!-- Skills Section -->
    <div class="form-section">
      <h2>
        <mat-icon>code</mat-icon>
        Required Skills
      </h2>
      
      <!-- Primary Skills -->
      <div class="skills-subsection">
        <h3>Primary Skills *</h3>
        <div class="skills-input-container">
          <mat-form-field appearance="outline" class="skills-input">
            <mat-label>Add Primary Skill</mat-label>
            <input matInput 
                   formControlName="primarySkillsInput"
                   placeholder="e.g., Angular, TypeScript"
                   (keypress)="onPrimarySkillKeyPress($event)">
            <button mat-icon-button 
                    matSuffix 
                    type="button"
                    (click)="addPrimarySkill()"
                    [disabled]="!vacancyForm.get('primarySkillsInput')?.value?.trim()">
              <mat-icon>add</mat-icon>
            </button>
          </mat-form-field>
        </div>
        
        <div class="skills-chips" *ngIf="primarySkills.length > 0">
          <mat-chip-set>
            <mat-chip *ngFor="let skill of primarySkills; let i = index" 
                     [removable]="true" 
                     (removed)="removePrimarySkill(i)"
                     class="primary-skill-chip">
              {{skill}}
              <mat-icon matChipRemove>cancel</mat-icon>
            </mat-chip>
          </mat-chip-set>
        </div>
      </div>

      <!-- Secondary Skills -->
      <div class="skills-subsection">
        <h3>Secondary Skills (Good to Have)</h3>
        <div class="skills-input-container">
          <mat-form-field appearance="outline" class="skills-input">
            <mat-label>Add Secondary Skill</mat-label>
            <input matInput 
                   formControlName="secondarySkillsInput"
                   placeholder="e.g., React, Vue.js"
                   (keypress)="onSecondarySkillKeyPress($event)">
            <button mat-icon-button 
                    matSuffix 
                    type="button"
                    (click)="addSecondarySkill()"
                    [disabled]="!vacancyForm.get('secondarySkillsInput')?.value?.trim()">
              <mat-icon>add</mat-icon>
            </button>
          </mat-form-field>
        </div>
        
        <div class="skills-chips" *ngIf="secondarySkills.length > 0">
          <mat-chip-set>
            <mat-chip *ngFor="let skill of secondarySkills; let i = index" 
                     [removable]="true" 
                     (removed)="removeSecondarySkill(i)"
                     class="secondary-skill-chip">
              {{skill}}
              <mat-icon matChipRemove>cancel</mat-icon>
            </mat-chip>
          </mat-chip-set>
        </div>
      </div>
    </div>

    <!-- Form Actions -->
    <div class="form-actions">
      <button type="button" 
              mat-stroked-button 
              class="cancel-btn"
              (click)="onCancel()">
        <mat-icon>close</mat-icon>
        Cancel
      </button>
      
      <button type="submit" 
              mat-raised-button 
              color="primary"
              class="submit-btn"
              [disabled]="vacancyForm.invalid || isSubmitting">
        <mat-spinner *ngIf="isSubmitting" diameter="20"></mat-spinner>
        <mat-icon *ngIf="!isSubmitting">save</mat-icon>
        {{isSubmitting ? 'Creating Vacancy...' : 'Create Vacancy'}}
      </button>
    </div>
    </form>
</div>
